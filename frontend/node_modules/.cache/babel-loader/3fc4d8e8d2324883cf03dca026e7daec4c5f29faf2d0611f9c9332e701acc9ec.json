{"ast":null,"code":"var _jsxFileName = \"/Users/shubham9162/Desktop/IITR/Stayzo app/stayzo/frontend/src/pages/Listings.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { fetchStays, fetchFoods } from \"../api/api\";\nimport StayCard from \"../components/StayCard\";\nimport FoodCard from \"../components/FoodCard\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Listings = () => {\n  _s();\n  const navigate = useNavigate();\n  const [stays, setStays] = useState([]);\n  const [foods, setFoods] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const staysRes = await fetchStays();\n        const foodsRes = await fetchFoods();\n        console.log(\"Fetched stays:\", staysRes.data);\n        console.log(\"Fetched foods:\", foodsRes.data);\n        if (Array.isArray(staysRes.data)) setStays(staysRes.data);\n        if (Array.isArray(foodsRes.data)) setFoods(foodsRes.data);\n      } catch (err) {\n        console.error(\"Error fetching data:\", err);\n        setError(\"Failed to load listings.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, []);\n  const handleBooking = (id, type) => {\n    if (!id) {\n      console.error(`Error: Missing ID for ${type} booking.`);\n      return;\n    }\n    navigate(`/booking/${type}/${id}`);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold mb-4\",\n      children: \"Stay Listings\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading listings...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-500\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-3 gap-4\",\n      children: stays.map(stay => stay._id ? /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: () => handleBooking(stay._id, \"stay\"),\n        className: \"cursor-pointer\",\n        children: /*#__PURE__*/_jsxDEV(StayCard, {\n          stay: stay\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 15\n        }, this)\n      }, stay._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }, this) : null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold mt-6 mb-4\",\n      children: \"Food Listings\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-3 gap-4\",\n      children: foods.map(food => food._id ? /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: () => handleBooking(food._id, \"food\"),\n        className: \"cursor-pointer\",\n        children: /*#__PURE__*/_jsxDEV(FoodCard, {\n          food: food\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 15\n        }, this)\n      }, food._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, this) : null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n};\n_s(Listings, \"u7PhYEG6EXsBP12ZhR5gwgkATrw=\", false, function () {\n  return [useNavigate];\n});\n_c = Listings;\nexport default Listings;\nvar _c;\n$RefreshReg$(_c, \"Listings\");","map":{"version":3,"names":["useEffect","useState","fetchStays","fetchFoods","StayCard","FoodCard","useNavigate","jsxDEV","_jsxDEV","Listings","_s","navigate","stays","setStays","foods","setFoods","loading","setLoading","error","setError","fetchData","staysRes","foodsRes","console","log","data","Array","isArray","err","handleBooking","id","type","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","stay","_id","onClick","food","_c","$RefreshReg$"],"sources":["/Users/shubham9162/Desktop/IITR/Stayzo app/stayzo/frontend/src/pages/Listings.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { fetchStays, fetchFoods } from \"../api/api\";\nimport StayCard from \"../components/StayCard\";\nimport FoodCard from \"../components/FoodCard\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst Listings = () => {\n  const navigate = useNavigate();\n  const [stays, setStays] = useState([]);\n  const [foods, setFoods] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const staysRes = await fetchStays();\n        const foodsRes = await fetchFoods();\n\n        console.log(\"Fetched stays:\", staysRes.data);\n        console.log(\"Fetched foods:\", foodsRes.data);\n\n        if (Array.isArray(staysRes.data)) setStays(staysRes.data);\n        if (Array.isArray(foodsRes.data)) setFoods(foodsRes.data);\n      } catch (err) {\n        console.error(\"Error fetching data:\", err);\n        setError(\"Failed to load listings.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const handleBooking = (id, type) => {\n    if (!id) {\n      console.error(`Error: Missing ID for ${type} booking.`);\n      return;\n    }\n    navigate(`/booking/${type}/${id}`);\n  };\n\n  return (\n    <div className=\"p-6\">\n      <h2 className=\"text-2xl font-bold mb-4\">Stay Listings</h2>\n      {loading && <p>Loading listings...</p>}\n      {error && <p className=\"text-red-500\">{error}</p>}\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        {stays.map((stay) =>\n          stay._id ? (\n            <div\n              key={stay._id}\n              onClick={() => handleBooking(stay._id, \"stay\")}\n              className=\"cursor-pointer\"\n            >\n              <StayCard stay={stay} />\n            </div>\n          ) : null\n        )}\n      </div>\n\n      <h2 className=\"text-2xl font-bold mt-6 mb-4\">Food Listings</h2>\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        {foods.map((food) =>\n          food._id ? (\n            <div\n              key={food._id}\n              onClick={() => handleBooking(food._id, \"food\")}\n              className=\"cursor-pointer\"\n            >\n              <FoodCard food={food} />\n            </div>\n          ) : null\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Listings;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}